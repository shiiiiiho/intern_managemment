#!/bin/sh
# pre-push hook: プッシュ前に全テストを実行

echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🔒 Pre-push: テスト実行中..."
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"

npm test

if [ $? -ne 0 ]; then
    echo ""
    echo "❌ テスト失敗！プッシュを中止します"
    echo ""
    echo "修正してから再度プッシュしてください："
    echo "  npm test        # 失敗箇所を確認"
    echo "  npm run lint    # Lint確認"
    echo ""
    exit 1
fi

echo ""
echo "✅ 全テスト成功！プッシュを続行します"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
